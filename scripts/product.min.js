document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("product-detail"),t=document.getElementById("cart-count"),n=new URLSearchParams(window.location.search).get("id");let o=JSON.parse(localStorage.getItem("cart"))||[];t.textContent=o.length,n?fetch(`https://fakestoreapi.com/products/${n}`).then(e=>e.json()).then(n=>{let a=n.price;e.innerHTML=`\n        <div class="product-info">\n          <img src="${n.image}" alt="${n.title}" class="product-image-large" />\n          <div>\n            <h2>${n.title}</h2>\n            <p>${n.description}</p>\n            <p class="product-price">Price: $<span id="price">${a.toFixed(2)}</span></p>\n\n            <label for="size">Size:</label>\n            <select id="size">\n              <option value="S">Small</option>\n              <option value="M">Medium</option>\n              <option value="L">Large</option>\n            </select>\n\n            <div class="quantity-selector">\n              <button id="decrease">−</button>\n              <input type="number" id="quantity" value="1" min="1">\n              <button id="increase">+</button>\n            </div>\n\n            <button id="add-to-cart">Add to Cart</button>\n          </div>\n        </div>\n      `;const d=document.getElementById("quantity"),i=document.getElementById("price"),c=()=>{const e=parseInt(d.value);i.textContent=(a*e).toFixed(2)};document.getElementById("increase").addEventListener("click",()=>{d.value=parseInt(d.value)+1,c()}),document.getElementById("decrease").addEventListener("click",()=>{d.value>1&&(d.value=parseInt(d.value)-1,c())}),document.getElementById("add-to-cart").addEventListener("click",()=>{const e=document.getElementById("size").value,a=parseInt(d.value);o.push({...n,selectedSize:e,quantity:a}),localStorage.setItem("cart",JSON.stringify(o)),t.textContent=o.length,alert("✅ Product added to cart!")})}).catch(t=>{e.innerHTML="<p>Failed to load product details.</p>",console.error(t)}):e.innerHTML="<p>Product not found.</p>"});